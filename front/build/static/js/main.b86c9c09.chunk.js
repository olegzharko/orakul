(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(8),s=n.n(a),o=(n(46),n(9)),i=(n(51),n(4)),u=n.n(i),l=n(6),d="http://app.synction.space",j=n(7),b=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c,r,a,s,o,i,l,d,b,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,c=t.method,r=void 0===c?"GET":c,a=t.headers,s=void 0===a?{}:a,o=t.bodyData,i={body:void 0,method:r||"GET",headers:Object(j.a)({Accept:"application/json","Content-Type":"applicatioin/json"},s)},o&&(i.body=JSON.stringify(o)),e.next=5,fetch(n,i);case 5:return l=e.sent,e.next=8,l.json();case 8:if((d=e.sent).success){e.next=12;break}throw b=l.status,h=l.message,new Error("[".concat(b,", ").concat(h,"] Could not fetch on URL (").concat(n,") data:\n").concat(JSON.stringify(d,null,2)));case 12:return e.abrupt("return",d.data);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function h(){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({url:"".concat(d,"/api/login?email=oleg99@gmail.com&password=admin123"),method:"POST"});case 3:return t=e.sent,n=t.token,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var f="SET_TOKEN",O=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:n=e.sent,t({type:f,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=(n(53),n(54),n(107));function m(e){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({url:"".concat(d,"/api/calendar"),headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var y="SET_OPTIONS",_="SET_IS_LOADING",g=function(e){return{type:_,payload:e}},w=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g(!0)),e.next=3,m(n);case 3:c=e.sent,t({type:y,payload:c}),t(g(!1));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=n(35),k=n(1),L=function(){return Object(k.jsx)(N.LoopCircleLoading,{})},E=(n(92),function(e){var t=e.day,n=e.hours;return Object(k.jsxs)("div",{className:"scheduler__weekDay",children:[Object(k.jsx)("div",{className:"scheduler__day",children:Object(k.jsxs)("p",{children:[t.day,Object(k.jsx)("br",{}),t.date]})}),Object(k.jsx)("div",{className:"scheduler__timeLine",children:n.map((function(e){var t=e.time;return Object(k.jsx)("p",{children:t},t)}))})]})}),S=n(39),T=(n(93),n(23)),D=n.n(T),M=n(38),A=n.n(M),C=Object(T.WidthProvider)(D.a);function I(e){var t=e.appointments,n=e.cols,r=e.handleDrag,a=Object(c.useState)(1200),s=Object(S.a)(a,2),o=s[0],i=s[1];Object(c.useEffect)((function(){i(A()(".scheduler__appointments").width())}),[]);return t?Object(k.jsx)(C,{className:"scheduler__dragAndDrop",cols:n,rowHeight:75,width:o,margin:[0,0],containerPadding:[0,0],verticalCompact:!1,preventCollision:!0,layout:t,onDragStop:function(e,t){var n=e.find((function(e){return e.i===t.i}));r(n)},children:t.map((function(e){var t=e.i,n=e.title,c=e.color,r=e.short_info;return Object(k.jsxs)("div",{className:"appointment",style:{borderLeft:"4px solid ".concat(c)},children:[Object(k.jsx)("div",{className:"appointment__title",children:n}),Object(k.jsx)("table",{className:"appointment__table",children:Object(k.jsx)("tbody",{children:Object(k.jsx)("tr",{children:Object.values(r).map((function(e){return Object(k.jsx)("td",{children:e},Object(v.a)())}))})})})]},t)}))}):Object(k.jsx)("span",{children:"Loading..."})}function J(e){var t=e.rawsQuantity;return Object(k.jsx)("td",{style:{width:"calc(100% / ".concat(t,")")}})}function P(e){var t=e.raws,n=e.columns;return Object(k.jsx)("div",{className:"scheduler__bodyTable",children:Object(k.jsx)("table",{children:Object(k.jsx)("tbody",{children:t.map((function(e,c){return Object(k.jsx)("tr",{children:n.map((function(e,n){return Object(k.jsx)(J,{rawsQuantity:t.length,row:c,cell:n},Object(v.a)())}))},Object(v.a)())}))})})})}var B=function(){var e=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.token.token})),n=Object(o.c)((function(e){return e.calendar})),r=n.options,a=n.isLoading;Object(c.useEffect)((function(){t&&!a&&w(e,t)}),[t]);var s=Object(c.useMemo)((function(){return null===r||void 0===r?void 0:r.rooms}),[r]),i=Object(c.useMemo)((function(){return null===r||void 0===r?void 0:r.work_time}),[r]),u=Object(c.useMemo)((function(){return a||!r}),[a,s,i]),l=Object(c.useMemo)((function(){return new Array((null===s||void 0===s?void 0:s.length)||0).fill(1)}),[s]),d=Object(c.useMemo)((function(){return null===r||void 0===r?void 0:r.day_and_date}),[r]),j=Object(c.useMemo)((function(){return new Array((null===i||void 0===i?void 0:i.length)*(null===d||void 0===d?void 0:d.length)||0).fill(1)}),[i]),b=Object(c.useMemo)((function(){return Object.values((null===r||void 0===r?void 0:r.contracts)||{})}),[r]),h=Object(c.useCallback)((function(e){var t=e.y,n=d[Math.floor(t/i.length)].day,c=i[t%i.length].time;console.log(n,c)}),[i,d]);return{shouldLoad:u,rooms:s,hours:i,tableRaws:j,tableColumns:l,days:d,appointments:b,handleAppointmentDrag:h}}(),t=e.shouldLoad,n=e.rooms,r=e.hours,a=e.tableRaws,s=e.tableColumns,i=e.days,u=e.appointments,l=e.handleAppointmentDrag;return t?Object(k.jsx)(L,{}):Object(k.jsxs)("div",{className:"scheduler",children:[Object(k.jsxs)("div",{className:"scheduler__header",children:[Object(k.jsx)("div",{}),Object(k.jsx)("div",{children:Object(k.jsx)("table",{children:Object(k.jsx)("tbody",{children:Object(k.jsx)("tr",{children:n.map((function(e){var t=e.title;return Object(k.jsx)("td",{style:{width:"calc(100% / ".concat(n.length,")")},children:t},t)}))})})})})]}),Object(k.jsxs)("div",{className:"scheduler__body",children:[Object(k.jsx)("div",{className:"scheduler__dayBar",children:i.map((function(e){return Object(k.jsx)(E,{day:e,hours:r},Object(v.a)())}))}),Object(k.jsxs)("div",{className:"scheduler__appointments",children:[Object(k.jsx)(P,{raws:a,columns:s}),Object(k.jsx)(I,{appointments:u,cols:s.length,handleDrag:l})]})]})]})},G=(n(105),function(){return Object(k.jsx)("div",{className:"scheduler__filter",children:"Filter block"})}),R=function(){return Object(k.jsx)("div",{children:"Form field"})},F=function(){return Object(k.jsxs)("div",{className:"scheduler__container",children:[Object(k.jsxs)("div",{className:"scheduler__dataView",children:[Object(k.jsx)(G,{}),Object(k.jsx)(B,{})]}),Object(k.jsx)("div",{className:"scheduler__form",children:Object(k.jsx)(R,{})})]})},Q=function(){return Object(k.jsx)(F,{})},z=function(){return function(){var e=Object(o.b)();Object(c.useEffect)((function(){O(e)}),[])}(),Object(k.jsx)(Q,{})},H=n(12),K={token:null},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(j.a)(Object(j.a)({},e),{},{token:t.payload});default:return e}},V={options:null,isLoading:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(j.a)(Object(j.a)({},e),{},{options:t.payload});case _:return Object(j.a)(Object(j.a)({},e),{},{isLoading:t.payload});default:return e}},q=Object(H.b)({token:U,calendar:W}),X=Object(H.c)(q);s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(o.a,{store:X,children:Object(k.jsx)(z,{})})}),document.getElementById("root"))},46:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.b86c9c09.chunk.js.map